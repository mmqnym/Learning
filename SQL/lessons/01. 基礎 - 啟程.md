# SELECT

**SELECT**：是一種用於從資料庫中擷取資料的 SQL 語句。

- 用法：

```sql
SELECT <column_name> FROM <table_name>;
```

- 練習：

```sql
SELECT * FROM actor; -- * 表示所有欄位

SELECT first_name, last_name FROM actor;
```

- **挑戰1**：

嘗試取得 customer 表中的 first_name,  last_name, email 等欄位

<details>
    <summary>參考答案</summary>

```sql
SELECT first_name, last_name, email FROM customer;
```
</details>

<br/>

# ORDER BY

**ORDER BY**：是一種用於對資料進行排序的 SQL 語句。

- 用法：

```sql
SELECT <column_name> FROM <table_name> ORDER BY <column_name> ASC|DESC;
```

**NOTE**: 通常 SQL 的 `ORDER BY` 預設使用 `ASC`，所以可以不用顯式描述。

- 練習：

```sql
SELECT * FROM actor ORDER BY first_name;

SELECT first_name, last_name FROM actor ORDER BY first_name DESC;

-- 當 first_name 相同時再依 last_name 排序，可以再往下接續排序條件
SELECT first_name, last_name FROM actor ORDER BY first_name DESC, last_name ASC;
```

- **挑戰 1 - UDEMY**：

嘗試取得 books 表中的**全部**欄位，並以 price 降序排序

<details>
    <summary>參考答案</summary>

```sql
SELECT * FROM books ORDER BY price DESC;
```
</details>

<br/>

- **挑戰 2**：

行銷團隊需要你將 customer 清單依 last_name 由 Z 到 A 排序，若 last_name 相同，再依 first_name 由 Z 到 A 排序。

<details>
    <summary>參考答案</summary>

```sql
SELECT * FROM customer ORDER BY last_name DESC, first_name DESC;
```
</details>

# SELECT DISTINCT

**SELECT DISTINCT**：是一種用於從資料庫中擷取不重複的資料的 SQL 語句。

**NOTE**: `DISTINCT` 指的是所選的**所有欄位**合起來不重複，也就是說只要有一個欄位不重複就會顯示，具體請看下方練習。

- 用法：

```sql
SELECT DISTINCT <column_name> FROM <table_name>;
```

- 練習：

```sql
SELECT DISTINCT first_name FROM actor;

-- SELECT DISTINCT 當超過一個欄位時，first_name, last_name 會合起來看是否重複
-- 例如 (Amy, Smith) 和 (Amy, Crane) 都會顯示，因為他們合起來看沒有重複。
SELECT DISTINCT first_name, last_name FROM actor ORDER BY first_name;

-- 查看電影有哪些評級
SELECT DISTINCT rating FROM film;

-- 查看電影有哪些租賃時間
SELECT DISTINCT rental_duration FROM film;

-- 查看電影有哪些唯一的評級和租賃時間
SELECT DISTINCT rating, rental_duration FROM film;
```

- **挑戰 1**：

行銷團隊需要你確認有哪些支付清單上，有哪些已被客戶支付的不同價格項目，並且為了幫助他們理解，需要由高價到低價排序。

**NOTE**: 提示查詢的 table 與支付相關，查詢欄位為 `amount`。
**NOTE**: 查詢結果為 11.99, 10.99, 9.99, 9.98, 8.99...

<details>
    <summary>參考答案</summary>

```sql
SELECT DISTINCT amount FROM payment ORDER BY amount DESC;
```
</details>

<br/>

# LIMIT

**LIMIT**：是一種用於限制查詢資料筆數的 SQL 語句。通常用於快速理解一個表。

- 用法:

```sql
SELECT <column_name> FROM <table_name> LIMIT <number>;
```

- 練習:

```sql
SELECT * FROM rental 
ORDER BY rental_date DESC
LIMIT 10;
```

- **挑戰 1 - UDEMY**:

寫一個單一SQL查詢，以取得 `books` 表中前 5 個獨特的 `genre`，並以字母順序排列。

此查詢將測試您排除重複並限制結果集的能力。
請記住，結果應僅顯示獨特的類別，意味著如果有多本相同類別的書，那個類別應僅在結果集中出現一次。此外，請確保類別以字母順序列出，並限制輸出為前 5 個類別。

**NOTE**: 答案為 `Classics`, `Dystopian`, ...

<details>
    <summary>參考答案</summary>

```sql
SELECT DISTINCT genre FROM books
ORDER by genre
LIMIT 5;
```
</details>

<br/>

# COUNT()

**COUNT()**：是一種用於計算資料筆數的 SQL 函數。

- 用法:

```sql
-- 注意：資料值為 NULL 的欄位不會被計算，對 SQL 而言，NULL 就是沒有值
SELECT COUNT(<column_name>) FROM <table_name>;
SELECT COUNT(*) FROM <table_name>;
```

- 練習:

```sql
SELECT COUNT(*) FROM actor;

-- 可能初學者會疑惑為何不是 SELECT DISTINCT COUNT(*) FROM actor;
-- 主要原因在 SQL 各語句的執行順序不同，在 SELECT 中，內部的函數會先執行
-- 因此若寫成 SELECT DISTINCT COUNT(*) FROM actor;
-- 就會導致對數量進行去重，結果就是沒有差異
SELECT COUNT(DISTINCT first_name) FROM actor;
```

- **挑戰 1**:

請根據員工表，寫一個單一 SQL 查詢來計算公司總員工人數。

表名稱：employees
相關欄位：id（你可以使用任何欄位來計算資料筆數，但 id 因其獨特性且不會有 NULL 值，因此通常是最佳選擇）

<details>
    <summary>參考答案</summary>

```sql
SELECT COUNT(id) FROM employees;
```
</details>

<br/>

# 章節挑戰

完成下列挑戰題目，驗證本章節所學的知識與技能。

**NOTE**: 你需要自行確認該使用哪些表與欄位，下面的提示僅表達原文關鍵字，不代表真實存在或是要查詢的表名與欄位。

1. 建立一個列表，顯示客戶（`customers`）來自哪些不重複地區（`districts`）的清單。
2. 最新一次的租借日期（`rental date`）是何時？
3. 公司共有多少部電影（`films`）？
4. 有多少不重複的客戶姓氏（`last name`）？

<details>
    <summary>1. 參考答案</summary>

```sql
SELECT DISTINCT district FROM address;
-- Ans: 
-- "Aden"
-- "Eastern Visayas"
-- "Vaduz"
-- "Tokat"
-- "Anzotegui"
-- ...
-- "Veracruz"
```
</details>

<br/>

<details>
    <summary>2. 參考答案</summary>

```sql
SELECT rental_date FROM rental
ORDER BY rental_date DESC
LIMIT 1;
-- Ans: 2020-02-14 15:16:03+00
```
</details>

<br/>

<details>
    <summary>3. 參考答案</summary>

```sql
SELECT COUNT(film_id) FROM film;
-- Ans: 1000
```
</details>

<br/>

<details>
    <summary>4. 參考答案</summary>

```sql
SELECT COUNT(DISTINCT last_name) FROM customer;
-- Ans: 599
```
</details>

<br/>