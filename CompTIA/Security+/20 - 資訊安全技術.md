# 資訊安全技術

## 概述

- **Security Techniques**（安全技術）：在數位時代中保護系統和資料的各種策略、工具和方法
  - 從傳統防火牆和防毒軟體到生物辨識驗證、加密和入侵偵測系統等進階技術

## 無線網路安全

- **Wireless Infrastructure Security**（無線基礎架構安全）：保護無線網路免受安全威脅的技術
  - 無線網路雖提供便利的連接性，但也帶來許多安全挑戰

- **WPA3**（Wi-Fi 保護存取協議 3）：最新的無線網路安全協議
  - 提供比 WPA2 更強的加密和認證機制

- **AAA**（認證、授權與稽核）：網路安全框架的三個基本安全服務
  - 認證（Authentication）：確認使用者身份
  - 授權（Authorization）：決定使用者可存取的資源
  - 稽核（Accounting）：追蹤使用者活動和資源使用情況

- **RADIUS**（遠端認證撥號使用者服務）：提供集中式認證、授權和稽核管理的網路協議
  - 常用於企業環境中管理網路存取

- **Cryptographic Protocols**（密碼協定）：保護通訊安全的數學演算法和方法
  - 確保資料在傳輸過程中的機密性、完整性和真實性

- **Authentication Protocols**（認證協定）：驗證使用者或設備身份的方法
  - 確保只有合法使用者能存取網路資源

## 應用程式安全

- **Input Validation**（輸入驗證）：檢查和過濾使用者輸入以防止惡意注入攻擊
  - 防範 SQL 注入、跨站腳本攻擊等常見漏洞

- **Secure Cookies**（安全 Cookie）：加強 Cookie 安全性的機制
  - 通常包含設定 HttpOnly、Secure 和 SameSite 等屬性，防止 Cookie 被竊取或濫用

- **Static Code Analysis**（靜態程式碼分析）：在不執行程式碼的情況下檢查程式碼的方法
  - 用於在開發階段識別安全漏洞和潛在問題

- **Dynamic Code Analysis**（動態程式碼分析）：在程式執行時分析其行為
  - 能發現靜態分析難以偵測的安全問題

- **Code Signing**（程式碼簽署）：使用數位簽章確保程式碼的完整性和來源
  - 防止惡意軟體冒充合法應用程式

- **Sandboxing**（沙盒）：在隔離環境中執行程式的技術
  - 限制程式存取系統資源，減少潛在損害

## 網路存取控制

- **Network Access Control (NAC)**（網路存取控制）：強制執行網路設備和使用者政策的安全解決方案
  - 限制不符合安全需求的終端設備存取網路資源
  - 保護網路免受潛在威脅

## 網頁和 DNS 過濾

- **Agent-based Web Filters**（代理式網頁過濾器）：安裝在終端設備上的過濾軟體
  - 直接在本地裝置上過濾網頁內容

- **Centralized Proxies**（中心化代理伺服器）：集中管理網路流量的伺服器
  - 可過濾所有經過的網路內容

- **URL Scanning**（URL 掃描）：分析網址以識別潛在威脅
  - 阻擋已知惡意或可疑的網站

- **Content Categorization**（內容分類）：將網頁內容分類以便實施過濾政策
  - 例如阻擋賭博、成人內容或惡意軟體網站

- **Block Rules**（阻擋規則）：定義哪些網站或內容類型應被阻擋的政策
  - 可根據組織需求客製化

- **Reputation**（信譽系統）：根據網站的已知行為和歷史評估其安全性
  - 幫助識別潛在的高風險網站

## 電子郵件安全

- **DMARC**（網域訊息認證報告與符合性）：電子郵件身份驗證協議
  - 結合 SPF 和 DKIM 技術，防止電子郵件詐騙和仿冒

- **DKIM**（網域密鑰識別郵件）：使用加密技術驗證電子郵件發件人身份
  - 確保郵件在傳輸過程中未被篡改

- **SPF**（發件人政策框架）：郵件伺服器驗證技術
  - 指定哪些郵件伺服器有權限代表特定網域發送郵件

- **Gateway Protocol**（閘道協議）：管理電子郵件進出組織的協議
  - 提供集中式安全控制點

- **Spam Filtering**（垃圾郵件過濾）：識別和隔離不需要的或惡意電子郵件的技術
  - 包括基於內容和發件人信譽的過濾方法

## 端點偵測與回應

- **Endpoint Detection and Response (EDR)**（端點偵測與回應）：持續監控和收集資料的網路安全技術
  - 針對終端設備（如電腦、平板、智慧型手機）進行監控
  - 用於識別、調查和預防潛在網路安全威脅

## 使用者行為分析

- **User Behavior Analytics (UBA)**（使用者行為分析）：利用機器學習和資料分析識別潛在有害活動的過程
  - 建立正常行為基準，偵測異常或偏差
  - 有助於快速發現帳戶盜用或內部威脅

## 選擇安全協議

- **Protocol Selection**（協議選擇）：選擇適當的通訊協議以確保資料安全
  - 應優先考慮具有強加密和認證功能的協議

- **Course Selection**（課題選擇）：根據安全需求選擇適當的加密演算法和密碼學標準
  - 在安全性和性能之間取得平衡

- **Transport Method Selections**（傳輸方法選擇）：選擇安全的資料傳輸方式
  - 包括 TLS/SSL、VPN 等安全傳輸層技術

# 無線基礎設施安全

- **Wireless Access Point (WAP)（無線存取點）**：一種允許無線裝置透過 802.11 Wi-Fi 標準和協定連接到有線網路的設備。
    - 放置位置對網路性能和安全性都至關重要
    - 影響網路的覆蓋範圍、訊號強度和安全性

- **Wireless Infrastructure Security（無線基礎設施安全）**：保護無線網路基礎設施免受未授權存取和威脅的安全措施。
    - 關鍵要素包括無線存取點的適當放置、現場調查與熱圖分析

- **Access Point Placement（存取點放置）**：
    - 優先考量：
        - 應放置於設施中央位置，遠離窗戶和外牆
        - 應安裝在較高位置（如天花板或高架）以最大化覆蓋並最小化干擾
    - 安全風險：靠近外牆或窗戶的存取點可能導致訊號洩漏到建築物外，允許外部攻擊者連接網路

- **Omnidirectional Antenna（全向天線）**：向所有方向（360度）廣播訊號的天線類型。
    - 適合於設施中央位置使用
    - 在設施邊緣使用時存在訊號洩漏風險

- **Unidirectional Antenna（單向天線）**：只向一個方向廣播訊號的天線類型。
    - 適合於外牆位置使用，訊號可集中指向設施內部
    - 可防止訊號洩漏到建築物外部區域

- **Extended Service Set (ESS)（延伸服務集）**：多個無線存取點協同工作，建立一個大型合併覆蓋區域的配置。
    - 適用於大型建築物需要完整無縫覆蓋的場景
    - 允許用戶在設施內移動時自動切換存取點，同時保持在同一網路中

- **Co-channel Interference（同頻道干擾）**：當兩個存取點使用相同頻道/頻段並提供重疊覆蓋區域時發生。
    - 導致訊號碰撞和數據重傳
    - 增加網路流量並降低效能

- **Adjacent Channel Interference（鄰近頻道干擾）**：當相鄰存取點的頻道間隔不足，造成頻率重疊時發生。
    - 導致大量錯誤和頻寬損失
    - 例如：2.4GHz 頻段中，若同時使用頻道 1、3 和 6，頻道 3 會與其他兩個產生頻譜重疊

- **Site Survey（現場調查）**：規劃和設計無線網路的過程，以確保提供所需的覆蓋範圍、數據傳輸率、網路容量和服務品質。
    - 通常包括實地考察以測試射頻干擾
    - 識別存取點的最佳安裝位置
    - 掃描空中電波以識別已配置的設備

- **Heat Map（熱圖）**：以圖形方式呈現無線網路覆蓋範圍、訊號強度和頻率使用數據的工具。
    - 使用不同顏色代表不同位置的訊號強度
    - 用途：
        - 識別覆蓋問題和訊號死區
        - 發現訊號過強區域
        - 確認訊號是否洩漏到建築物外部

- **2.4 GHz Frequency Band（2.4 GHz 頻段）**：
    - 僅有 11 個頻道可用，每個頻道寬度為 22 MHz
    - 總可用頻寬為 100 MHz，導致頻道間存在大量重疊
    - 最佳實踐：選擇頻道 1、6 和 11，因為這些頻道不會相互重疊和干擾

# 無線網路安全設定

## 無線網路加密技術

- **WEP (Wired Equivalent Privacy)** （有線等效隱私）：於1999年推出的無線網路安全標準
  - 使用靜態加密金鑰系統，同一網路的所有裝置使用相同金鑰加密和解密
  - 主要有64位元（40位元金鑰+24位元初始化向量）和128位元（104位元金鑰+24位元初始化向量）兩種規格
  - 因24位元初始化向量太弱，現代筆電約3分鐘即可破解，被視為不安全選項，不應再使用
  - 採用脆弱的RC4加密演算法，容易受到密碼分析攻擊

- **WPA (Wi-Fi Protected Access)** （Wi-Fi保護存取）：2003年作為WEP的替代方案
  - 使用時序金鑰完整性協定（TKIP）改進WEP的加密機制
  - 為每個封包動態生成新的128位元金鑰，避免金鑰重複使用的弱點
  - 因承襲WEP的部分弱點，TKIP實作存在漏洞，缺乏足夠的資料完整性檢查
  - 被視為不安全，因資料完整性檢查不足

- **WPA2 (Wi-Fi Protected Access 2)** （Wi-Fi保護存取2）：2004年隨802.11i標準推出
  - 以高級加密標準（AES）取代TKIP
  - 採用CCMP（計數器密碼模式與區塊鏈消息驗證碼協定）作為更強大的加密機制
  - 加入訊息完整性碼（MIC）進行完整性檢查
  - 2016年因KRACK攻擊顯露其弱點

- **WPA3 (Wi-Fi Protected Access 3)** （Wi-Fi保護存取3）：最新版本的無線網路安全標準
  - 繼續使用AES進行加密，但加入多項新功能：
  - **SAE (Simultaneous Authentication of Equals)** （對等同步認證）：
    - 取代舊有預共享金鑰方法，基於Diffie-Hellman金鑰協議
    - 提供更好的離線字典攻擊防護
    - 即使攻擊者截獲建立加密握手所需的資料，仍無法執行離線攻擊猜測網路密碼
  - **Enhanced Open (Opportunistic Wireless Encryption, OWE)** （增強開放/機會性無線加密）：
    - 為開放網路提供個人化資料加密，無需身份驗證即可保護資料
    - 防止被動竊聽攻擊，適用於公共Wi-Fi環境
  - **更新的加密協定**：
    - 從AES CCMP升級到AES GCMP（伽羅瓦計數器模式協定）
    - 支援個人網路的128位元AES和企業網路的192位元AES
  - **管理保護框架**：
    - 保護網路免受金鑰恢復攻擊
    - 確保網路監控流量的完整性，防止竊聽、偽造或竄改
    - 加強網路穩定性和使用者安全性

## AAA協定

- **AAA (Authentication, Authorization, and Accounting)** （認證、授權和稽核）：
  - 網路安全的核心機制，集中化管理使用者身份驗證，確保僅授權人員可存取網路資源

- **RADIUS (Remote Authentication Dial-In User Service)** （遠端認證撥號使用者服務）：
  - 採用客戶端-伺服器模型的網路協定
  - 提供認證、授權和稽核服務
  - 透過集中式伺服器驗證使用者身份，根據預設策略授予適當存取權限
  - 監控使用者活動以確保責任追溯和安全政策執行

- **TACACS+ (Terminal Access Controller Access-Control System Plus)** （終端訪問控制器存取控制系統增強版）：
  - 提供類似RADIUS的AAA服務
  - 分離認證、授權和稽核功能，允許對這些過程進行更細緻的控制
  - 使用傳輸控制協定（TCP）並加密整個認證過程
  - 相較於其他AAA協定提供更高的安全性

## 認證協定

- **EAP (Extensible Authentication Protocol)** （可擴展認證協定）：
  - 支援多種認證方法的認證框架
  - 提供通用功能和認證協定協商
  - 用於無線網路和點對點連接
  - 定義訊息格式和整體流程，作為各種特定EAP認證方法的基礎

- **PEAP (Protected Extensible Authentication Protocol)** （受保護的可擴展認證協定）：
  - 將EAP封裝在加密和認證的TLS隧道中
  - 由Cisco Systems、Microsoft和RSA Security共同開發
  - 安全傳輸802.11 Wi-Fi網路上的認證資料
  - 需要伺服器端和客戶端雙方進行憑證驗證

- **EAP-TTLS (Extensible Authentication Protocol-Tunneled Transport Layer Security)** （隧道傳輸層安全的可擴展認證協定）：
  - 擴展TLS支援至多個平台
  - 僅需伺服器端憑證，不需要客戶端憑證
  - 在TLS加密隧道內封裝第二個認證協定

- **EAP-FAST (Extensible Authentication Protocol-Flexible Authentication via Secure Tunneling)** （安全隧道靈活認證的可擴展認證協定）：
  - Cisco Systems開發的認證協定
  - 允許使用者在網路漫遊時安全重新認證，無需每次執行完整認證
  - 使用受保護的存取憑證建立TLS隧道，驗證客戶端憑證
  - 作為輕量級EAP（LEAP）的替代方案，解決其安全漏洞

# 應用程式安全性（Application Security）

## 基本概念

- **Application Security**（應用程式安全性）：軟體開發中的關鍵面向，專注於從設計上打造安全的應用程式。
  - 實作各種措施來預防、檢測和修復安全漏洞。

## 六大應用程式安全領域

### 1. 輸入驗證

- **Input Validation**（輸入驗證）：應用程式安全性的基礎環節，作為把關者確保應用程式只處理格式正確且未受污染的資料。
  - 直接對抗利用資料輸入弱點的各種攻擊形式，保護應用程式的完整性與行為。
  - 所有互動點都是潛在弱點，包括：使用者表單輸入、應用程式間資料傳輸、系統內部函數呼叫。
  - 防禦的攻擊類型：SQL 注入（SQL injection）、跨網站指令碼攻擊（XSS）、緩衝區溢位（buffer overflow）。

- **前端驗證**（Front-end Validation）：在網頁表單中確保資料符合正確格式後才接受。
  - 單獨使用前端驗證可被攻擊者繞過。

- **後端驗證**（Back-end Validation）：在伺服器端檢查資料，避免應用程式使用未經驗證的資料。
  - 單獨依賴後端驗證可能耗費較多資源或時間。

- **驗證規則**（Validation Rules）：規定可接受和不可接受的輸入的特定標準。
  - 例如：電話號碼欄位僅限輸入10位數字，不允許字母、特殊字元或額外數字。

### 2. 安全性 Cookies

- **Secure Cookies**（安全性 Cookies）：透過安全的 HTTPS 連線傳輸的 cookies，防止潛在的監聽者攔截 cookie 資料。
  - 用於維護網頁伺服器和客戶端之間的穩定資訊。
  - 若未妥善保護，cookies 可能被利用來劫持使用者工作階段或竊取敏感資料。

- **Cookie 安全最佳實踐**：
  - 不使用持久性 cookies 進行工作階段驗證，每次使用者重新驗證時產生新的 cookie。
  - 啟用 cookie 的 secure 屬性，確保 cookie 不會透過不安全的 HTTP 連線傳輸。
  - 啟用 cookie 的 HttpOnly 屬性，防止透過文件物件模型（DOM）或客戶端指令碼存取 cookie。
  - 設定 SameSite 屬性，限制哪些來源可以存取指定的 cookie，降低跨站請求偽造（CSRF）攻擊風險。

### 3. 靜態程式碼分析

- **Static Code Analysis/SAST**（靜態程式碼分析/靜態應用安全測試）：在程式執行前檢查和分析原始碼的除錯方法。
  - 設計用於分析原始碼中的潛在弱點，如緩衝區溢位、SQL 注入和跨站指令碼攻擊。
  - 通常使用軟體分析工具執行，需要支援相應的程式語言。

- **Manual Code Review**（手動程式碼審查）：由人工而非工具進行的程式碼審查。
  - 通常指派非原始開發者進行審查，有助於發現錯誤的假設或經驗不足的問題。

### 4. 動態程式碼分析

- **Dynamic Code Analysis/DAST**（動態程式碼分析/動態應用安全測試）：在應用程式運行時進行分析的測試方法。
  - 設計用於發現靜態程式碼分析可能遺漏的漏洞，如運行時錯誤和記憶體洩漏問題。

- **Fuzzing**（模糊測試）：一種軟體測試技術，通過輸入大量隨機資料（稱為 fuzz）到系統中，嘗試使其崩潰，從而發現編碼錯誤和安全漏洞。
  - 涉及自動注入畸形或意外資料到系統中，並監控異常情況。

- **Stress Testing**（壓力測試）：評估系統在極端條件下的穩定性和可靠性的測試。
  - 目標是識別系統弱點，確定其在高負載下的行為和故障恢復能力。
  - 例如：模擬成千上萬用戶同時訪問網站，識別系統瓶頸、測試負載平衡效果。

### 5. 程式碼簽章

- **Code Signing**（程式碼簽章）：用於確認軟體作者身份並確保程式碼自簽署後未被篡改或損壞的技術。
  - 使用數位簽章對軟體來源和完整性進行認證。
  - 過程包含使用加密雜湊值（cryptographic hash）和開發者私鑰加密，創建程式檔案的數位簽章。
  - 接收程式時，公鑰用於驗證簽章的有效性。

- **簽章限制**：數位簽章不保證軟體的絕對安全或無漏洞，僅確保檔案自開發者簽署後未被修改。

### 6. 沙盒機制

- **Sandboxing**（沙盒機制）：通過限制程式可存取的資源和可對系統進行的變更，來隔離運行程式的安全機制。
  - 用於在不危及主機裝置或網路的情況下執行未測試或不可信的程式。
  - 提供比典型反惡意軟體工具更全面的解決方案，可在不同環境下測試程式碼。
  - 一個系統可運行多個使用不同作業系統的沙盒。

## 應用程式安全性的綜合策略

- **Defense in Depth**（縱深防禦）：多層次安全方法，整合多種安全措施形成強大的防禦策略。
  - 可能包含：安全通訊協定、定期安全稽核、適當的錯誤處理等。

# 網路存取控制

- Network Access Control（NAC 網路存取控制）：一種用於保護網路不受已知和未知裝置影響的安全技術，透過掃描裝置以確定其安全狀態，再決定是否允許其存取網路。
  - 可應用於內部網路中的電腦，或透過 VPN 遠端連接的裝置
  - 當裝置嘗試連接網路時，會先置於虛擬暫存區進行掃描
  - 掃描可以簡單（如基本 EAP 認證）或更深入（如檢查防毒定義、安全修補狀態等）

## NAC 運作流程

- NAC Inspection（NAC 檢查）：裝置連接網路時的安全檢查流程 
  - 通過檢查：裝置被允許進入網路並存取所有組織資源
  - 未通過檢查：裝置被置於數位隔離區，等待修復
    - 隔離區中的裝置可獲取防毒更新、作業系統修補與安全設定，但無法與網路其他部分通訊
    - 裝置一旦符合要求，即可獲得網路完整存取權限

## NAC 解決方案類型

- Persistent Agent（持續性代理程式）：安裝在裝置上的軟體
  - 適用於企業環境，因組織擁有所有裝置並控制其軟體基準
  - 不適合自攜裝置（BYOD）環境

- Non-persistent Agent（非持續性代理程式）：臨時性安裝的軟體
  - 適用於大學校園等自攜裝置環境
  - 使用者連接網路後，通過網頁式驗證入口登入並點擊連結
  - 代理程式下載後掃描裝置合規性，完成後自行刪除

- NAC 實現形式：可作為硬體或軟體解決方案

## NAC 標準與方法

- IEEE Standard 802.1x（IEEE 802.1x 標準）：最常用的網路存取控制機制，用於基於連接埠的網路存取控制
  - 現代 NAC 通常建立在 802.1x 標準之上，並增加其他功能

## NAC 規則方法

- Time-based Factors（基於時間的因素）：使用時間排程定義存取期間
  - 例如：僅允許正常工作時間（9-5）存取，拒絕非工作時間的登入
  - 須小心實施以避免阻止合法存取，特別是全球性組織

- Location-based Factors（基於位置的因素）：評估請求存取的終端位置
  - 使用 IP 地理位置、GPS 等機制
  - 例如：若員工通常從美國佛羅里達州登入，突然從義大利登入時，系統會標記並進行調查

- Role-based Factors（基於角色的因素）：重新評估裝置授權
  - 又稱為 Adaptive NAC（自適應 NAC）
  - 根據裝置角色決定其允許執行的操作
  - 例如：用戶筆電不應連接到伺服器管理子網，但伺服器可以

- Rule-based Factors（基於規則的因素）：使用複雜的准入政策，包含一系列邏輯條件
  - 透過「if-then」邏輯陳述式組合規則
  - 可根據使用者角色、裝置類型等設定允許或拒絕存取的條件

## NAC 價值

- 作為深度防禦策略的重要組成部分
- 有助於在網路中實施零信任架構（Zero Trust Architecture）

# Web & DNS Filtering

- **Web Filtering**（網頁過濾）：控制或限制使用者可存取的網際網路內容的技術
  - 又稱為 Content Filtering（內容過濾）
  - 是企業、教育機構和家長確保安全和高效率網際網路使用的重要工具
  - 主要用於防止訪問惡意網站或提高員工生產力

- **DNS Filtering**（域名系統過濾）：通過阻止特定域名轉換為其對應的 IP 地址來阻止存取特定網站的技術
  - 當使用者嘗試訪問網站時，設備會發送請求到 DNS 伺服器
  - 如果域名在 DNS 過濾器的黑名單上，則不會提供 IP 地址，阻止訪問
  - 是防止存取惡意網站的強大工具，常用於執行網路使用政策

## Web Filtering 的類型

- **Agent-based Web Filtering**（代理程式式網頁過濾）：在每台需要進行網頁過濾的設備上安裝小型軟體（代理程式）
  - 代理程式監控並控制設備的網路活動，執行組織的網路使用政策
  - 特別適用於有遠端或移動工作者的組織
  - 無論設備連接到企業網路、公共 Wi-Fi 或家庭網路，過濾政策都會生效

- **Centralized Proxies**（集中式代理伺服器）：作為終端使用者與網際網路之間的中介伺服器
  - 當使用者請求連接特定網站時，請求先發送至代理伺服器
  - 代理伺服器根據組織的網路使用政策評估請求
  - 如符合政策，代理伺服器代表使用者擷取內容並轉發回應
  - 如不符合政策，請求被阻止或拒絕，並傳回警告或錯誤訊息給使用者

- **URL Scanning**（網址掃描）：分析網站的網址，判斷其是否安全存取
  - 首先檢查使用者請求的網址，與已知惡意網站資料庫比對
  - 如發現匹配，該網址被視為惡意，使用者將被阻止存取
  - 如在資料庫中未找到，則假設安全並允許使用者存取

- **Content Categorization**（內容分類）：根據內容類型將網站分類
  - 類別可能包括社群媒體、成人內容、賭博等通常在工作環境中被禁止的類別
  - 組織可以根據自己的網路使用政策來阻止或允許特定類別

- **Block Rules**（阻擋規則）：組織設定的特定準則，用於阻止存取特定網站或網站類別
  - 例如，系統管理員可能會封鎖可疑的遠端伺服器 IP，防止敏感資料外洩

- **Reputation-based Filtering**（聲譽式過濾）：根據網站的聲譽評分來阻止或允許網站
  - 聲譽評分通常由第三方服務確定
  - 考慮因素包括網站的惡意軟體託管歷史或涉及網路釣魚攻擊等

## 應用場景

- **學校和大學**：網頁和 DNS 過濾常用於阻止不適當內容，確保學生僅將網際網路用於教育目的
  - 可以阻止社群媒體、成人內容或賭博網站

- **企業環境**：組織可以利用過濾技術來：
  - 防止員工訪問惡意網站
  - 減少因瀏覽社群媒體等分心網站導致的生產力損失
  - 執行組織的網際網路使用政策

## Web Filtering 與 DNS Filtering 的差異

- 這兩種過濾方式的主要區別在於：
  - Web Filtering 更全面，可以阻擋或允許特定網站、URL 或內容
  - DNS Filtering 是 Web Filtering 的子集，專注於透過分析 DNS 條目來阻止整個域名
  - DNS Filtering 在建立連接前就進行過濾，而 Web Filtering 可以在連接過程中進行更深入的內容分析

- Web Filtering 包括 URL 過濾，能將網站分類為社群網路、娛樂、成人內容等不同組別

- 現代網頁安全解決方案結合了進階 URL 過濾和 DNS 安全功能，能夠：
  - 使用深度學習分析使用者網頁內容
  - 分析網頁內容而非僅檢查 URL 字串
  - 比傳統網頁過濾資料庫多預防 40% 的威脅

# 電子郵件安全

- **Email Security**（電子郵件安全）：保護電子郵件內容、帳戶和基礎架構免於未經授權的存取、遺失或遭到入侵的各種技術和協議
  - 包含 DKIM、SPF、DMARC、電子郵件閘道協議和垃圾郵件過濾機制等技術

## 核心電子郵件認證技術

- **DKIM (Domain Keys Identified Mail)**（網域金鑰識別郵件）：允許接收者檢查電子郵件是否真的由宣稱的網域發送，並確認內容在傳輸過程中是否被竄改
  - 原理：在電子郵件標頭加入數位簽章，該簽章可以透過存放在寄件網域 DNS 記錄中的公開加密金鑰驗證
  - 流程：寄件方的郵件伺服器使用私鑰對郵件進行數位簽章，接收方伺服器使用寄件方網域中的公鑰解密並驗證簽章
  - 優點：電子郵件認證、防止電子郵件詐騙、提高郵件送達率、提升寄件者聲譽
  - 可以在轉發過程中保持有效，是確保電子郵件安全的基礎

- **SPF (Sender Policy Framework)**（寄件者政策框架）：防止在電子郵件傳遞過程中偽造寄件者地址的電子郵件認證方法
  - 原理：啟用 SPF 的伺服器收到電子郵件時，會驗證寄件者的 IP 地址是否在寄件者網域 DNS 記錄中發布的已授權 IP 列表中
  - 例如：收到來自 diontraining.com 的郵件時，接收郵件伺服器會確認寄件者 IP 是否列在 diontraining.com 的 SPF 記錄中
  - 優點：防止電子郵件詐騙、提高郵件送達率、提升網域聲譽
  - 允許網域擁有者指定哪些伺服器被授權使用其網域發送電子郵件

- **DMARC (Domain-based Message Authentication, Reporting, and Conformance)**（基於網域的訊息認證、報告和一致性）：一種電子郵件驗證系統，用於檢測和防止電子郵件詐騙
  - 功能：允許網域管理者發布政策，規定發送郵件時應採用何種機制，以及接收者應如何處理認證失敗的情況
  - 配合方式：可以與 DKIM、SPF 或兩者同時使用，取決於配置方式
  - 範例：公司設定 DMARC 政策指示接收郵件服務拒絕已失敗 DKIM 或 SPF 檢查的郵件
  - 主要目的：保護網域不被用於商業電子郵件入侵攻擊、釣魚郵件、郵件詐騙和其他網路安全威脅
  - 是 SPF 和 DKIM 的政策層，幫助電子郵件接收系統識別未來自公司核准網域的郵件

- **S/MIME** (安全/多用途網際網路郵件延伸)：是一種標準，用於數位簽章和加密電子郵件，以確保郵件的真實性和機密性。

## 電子郵件基礎設施與過濾機制

- **Email Gateway Protocol**（電子郵件閘道協議）：作為電子郵件進出口點的伺服器或系統，負責處理網際網路與本地網路之間的電子郵件傳輸
  - 通常使用 SMTP (Simple Mail Transfer Protocol) 傳送和接收郵件
  - 功能：
    - 電子郵件路由：引導發送郵件至正確目的地，引導接收郵件至適當用戶信箱
    - 電子郵件安全：掃描每封進出郵件，防範垃圾郵件、釣魚和惡意軟體
    - 政策執行：阻擋含有敏感資訊的外發郵件，或阻擋來自特定或已知惡意用戶的郵件
    - 加密和解密：加密外發郵件和解密收到的郵件，保護組織敏感資訊
  - 部署方式：
    - 內部部署郵件閘道：位於組織自己資料中心的實體伺服器，提供完全控制，靈活但需要維護
    - 雲端郵件閘道：由第三方雲服務提供商託管，提供高可擴展性和易於維護，但可能成本較高
    - 混合郵件閘道：結合內部部署和雲端閘道優勢，平衡控制和便利性

- **Spam Filtering**（垃圾郵件過濾）：偵測不必要和未經請求的電子郵件並防止它們到達用戶收件匣的過程
  - 技術：內容分析、貝氏過濾、基於 DNS 的沉洞列表和一般電子郵件過濾規則
  - 例如：若電子郵件包含彩票、免費、獎品等常見垃圾郵件相關詞彙，可能被標記為垃圾郵件
  - 協助識別不需要過濾的非垃圾郵件，提高郵件處理效率

## 整合電子郵件安全措施

電子郵件安全可以透過各種技術提升，包括 DKIM、SPF、DMARC、電子郵件閘道協議和垃圾郵件過濾機制的配置。這些技術共同形成全面的電子郵件安全防護：

- DKIM 添加數位簽章確保完整性
- SPF 驗證寄件者 IP 地址防止偽造
- DMARC 整合 SPF 和 DKIM 並提供處理失敗郵件的指示
- 電子郵件閘道管理郵件路由與安全
- 垃圾郵件過濾基於內容和寄件者聲譽阻擋不需要的郵件

在現代企業網路中，每個電子郵件伺服器都應配置 DMARC 作為針對電子郵件詐騙和攻擊的最低防護標準。

# EDR 端點偵測與回應

- **EDR (Endpoint Detection and Response，端點偵測與回應)**：一種網路安全技術，負責持續監控和回應端點上的進階威脅。
  - 是許多企業組織安全運作的關鍵組件
  - 監控端點和網路事件並將資訊記錄於中央化資料庫，進行進一步的分析、偵測、調查、報告和警報

## EDR 的工作流程

EDR 透過六步驟持續監控並收集可能顯示威脅的端點資料：

- **資料收集 (Data Collection)**：從所有端點收集資料。
  - 端點包括任何網路終端設備，如桌上型電腦、筆記型電腦和行動裝置
  - 收集的資料包括系統程序、登錄檔變更、記憶體使用情況、網路流量模式和其他系統活動

- **資料整合 (Data Consolidation)**：將收集的資料傳送到中央安全解決方案或資料庫進行分析。
  - 資料庫可位於內部或雲端，取決於組織使用的具體 EDR 解決方案

- **威脅偵測 (Threat Detection)**：使用各種技術分析已收集和整合的資料以偵測威脅。
  - 偵測技術包括：
    - 特徵碼偵測：尋找已知的惡意活動模式
    - 行為偵測：尋找可能表示威脅的異常行為

- **警報和威脅回應 (Alerts and Threat Response)**：當偵測到潛在攻擊時，EDR 解決方案可採取多種行動。
  - 向安全團隊發送警報，提供關於已識別威脅的詳細資訊
  - 執行自動化動作以遏制威脅，例如將受影響的端點從網路隔離，防止威脅進一步擴散

- **威脅調查 (Threat Investigation)**：為安全團隊提供所需工具進行威脅調查。
  - 這些工具包括端點活動的詳細時間軸、鑑識資料和其他資訊
  - 幫助確定威脅的性質、來源和對系統的影響

- **修復 (Remediation)**：在適當調查威脅後，EDR 解決方案可協助修復威脅。
  - 移除惡意檔案
  - 還原威脅造成的變更
  - 使用安全基準將受影響系統恢復正常狀態

## 相關技術

- **FIM (File Integrity Monitoring，檔案完整性監控)**：用於驗證作業系統和應用軟體檔案的完整性。
  - 使用驗證方法比較當前檔案狀態與已知良好的基準
  - 可識別關鍵檔案的變更，包括二進位檔案、系統應用程式檔案以及組態和參數檔案
  - 通常使用稱為代理程式的小型軟體持續監控關鍵系統檔案的變化
  - 每個檔案先進行雜湊處理，雜湊摘要儲存在已知良好檔案雜湊的資料庫中
  - 當偵測到未授權變更時，FIM 解決方案會警示安全團隊進行調查

- **XDR (Extended Detection and Response，擴展偵測與回應)**：整合多種保護技術於單一平台的安全策略。
  - 目的是提高偵測準確性並簡化事件回應流程
  - 收集並自動關聯多個安全層的資料，包括電子郵件、端點、伺服器、雲端工作負載和網路
  - 加速威脅偵測，減少安全分析師回應問題所需時間
  - 整合取代分散式解決方案：
    - 不再需要分別使用網路安全、電子郵件安全和端點安全解決方案
    - 簡化安全基礎設施
    - 改善威脅偵測與回應速度

## EDR 與 XDR 的差異

- **EDR 專注於端點**：
  - 關注電腦、筆記型電腦和行動裝置等端點
  - 收集端點資料，分析威脅跡象並回應

- **XDR 提供更全面的解決方案**：
  - 範圍擴展至端點以外
  - 收集並關聯多個安全層的資料（端點、網路、雲端和電子郵件）
  - 偵測與回應更廣泛的威脅

- **FIM 常作為 EDR 或 XDR 的一部分**：
  - 驗證作業系統和應用軟體檔案的完整性

透過理解並實施這些工具，組織可以顯著增強其安全態勢，提高抵禦各種網路威脅和攻擊的彈性。

# 使用者行為分析

- **User Behavior Analytics (UBA)／User and Entity Behavior Analytics (UEBA)**（使用者行為分析／使用者與實體行為分析）：一種先進的網路安全策略，利用大數據和機器學習分析使用者行為並偵測可能表明潛在安全威脅的異常情況。
  - UBA 專注於分析使用者行為
  - UEBA 則同時監控使用者和實體（如路由器、伺服器和端點設備）
  - 隨著網路安全威脅的演變，組織正從傳統的基於特徵的檢測方法轉向使用者行為分析，以建立更主動的防禦姿態

- **Big Data**（大數據）：使用者行為分析系統收集並處理的大量資料，用於理解系統和網路中的使用者行為模式。
  - 來源包括網路流量、使用者設備和應用程式日誌
  - 收集的資料用於識別代表典型使用者行為的模式

- **Machine Learning Algorithms**（機器學習演算法）：UBA/UEBA 系統使用的技術，用於學習和理解一段時間內的正常使用者行為。
  - 隨著時間的推移，系統學習「正常情況」的樣子
  - 能夠識別應該標記出來供安全團隊進一步調查的偏差行為

- **Baseline of Normal User Behavior**（正常使用者行為基線）：使用者行為分析系統建立的標準，用於比較和偵測異常行為。
  - 透過先進的分析技術如機器學習和統計分析建立
  - 系統會持續監控組織的使用者活動，並將其與基線進行比較以識別異常

- **Anomalies**（異常）：偏離已建立行為模式的行為，可能表明潛在的安全威脅。
  - 例如：使用者在非常規工作時間登入
  - 例如：使用者存取通常不需要的檔案（如講師嘗試存取人力資源或財務資料）
  - 例如：下載大量資料，可能表明資料外洩嘗試
  - 例如：帳戶突然執行非典型操作（如從只讀變成修改或刪除資料）

- **UBA/UEBA Benefits**（使用者行為分析的優點）：實施使用者行為分析系統的主要優勢。
  - **Early Detection of Threats**（早期威脅偵測）：在威脅造成重大損害前識別並快速回應
  - **Insider Threat Detection**（內部威脅偵測）：特別有效於識別使用傳統安全措施難以偵測的內部威脅
  - **Improved Incident Response**（改善事件響應）：提供使用者行為的詳細資訊，協助安全團隊更有效地回應事件，甚至可能自動執行初步安全措施（如登出可能被入侵的帳戶）

- **Security Threats**（安全威脅）：UBA/UEBA 系統旨在偵測的潛在威脅類型。
  - 內部威脅（Insider Threats）
  - 憑證遭入侵（Compromised Credentials）
  - 外部攻擊（External Attacks）
  - 資料外洩（Data Exfiltration）

# 安全通訊協定與資料傳輸方法

## 通訊協定選擇

- **Protocol（通訊協定）**：用於在電子設備間傳輸資料的一套規則和程序。
  - 不同協定可完成相同任務，但選擇何種協定會影響整體網路安全性

### 安全與不安全協定對比

- **HTTP（超文本傳輸協定）**：以明文傳輸資料，容易遭受中間人攻擊或竊聽。
  - 預設使用連接埠 80

- **HTTPS（超文本傳輸協定安全版）**：加密傳輸的資料，使其轉為密文形式。
  - 只有具備適當解密金鑰的預期接收者才能讀取資料
  - 預設使用連接埠 443

- **FTP（檔案傳輸協定）**：以明文傳輸資料，易受中間人或竊聽攻擊。
  - 因在已知連接埠上傳輸明文憑證和命令，容易被防火牆檢查

- **SFTP（安全檔案傳輸協定）**：透過 SSH（安全殼層）通道傳輸資料，確保資料機密性。
  - 通過加密的 SSH 通道保護資料傳輸
  - 與 FTPS 不同，FTPS 使用動態次要連接埠傳輸資料，實施較困難

- **Telnet（遠端登入）**：較舊的不安全協定，用於遠端命令列管理伺服器和網路設備。
  - 無任何安全性或加密措施
  - 所有傳輸資料（包括登入憑證）皆以明文傳送，易受攻擊

- **SSH（安全殼層）**：提供遠端命令列管理功能，但使用強密碼和公鑰認證。
  - 所有傳輸資料均經過加密，確保網路傳輸安全
  - 管理員登入時，憑證在傳送前會被加密，即使攔截也無法讀取

### 郵件相關協定

- **SMTP（簡單郵件傳輸協定）**：用於發送電子郵件的不安全版本。
  - 透過連接埠 25 以明文運作

- **SMTPS（簡單郵件傳輸協定安全版）**：加密版本的 SMTP。
  - 透過連接埠 587 運作

- **POP3（郵局協定第三版）**：允許從郵件伺服器擷取郵件訊息。
  - 透過連接埠 110 運作

- **POP3S（郵局協定第三版安全版）**：POP3 的加密版本。
  - 透過連接埠 995 接收電子郵件

- **IMAP（網際網路訊息存取協定）**：更現代的電子郵件協定，提供對郵件伺服器所存郵件的存取。
  - 透過連接埠 143 運作

- **IMAPS（網際網路訊息存取協定安全版）**：IMAP 的加密版本。
  - 透過連接埠 993 接收加密電子郵件

## 連接埠選擇

- **Port（連接埠）**：識別系統中特定程序或服務的邏輯結構，與主機的 IP 位址和所用協定類型相關聯。

### 連接埠類別

- **Well-known Ports（知名連接埠）**：0 到 1023，由系統程序或服務使用。

- **Registered Ports（註冊連接埠）**：1024 到 49,151，通常由軟體應用程式使用。

- **Dynamic/Private Ports（動態或私有連接埠）**：49,152 到 65,535，通常用於客戶端連線。
  - 通常由作業系統隨機分配

### 連接埠安全考量

- 遵循最小權限原則：只開放應用程式必需的連接埠，阻擋其他所有連接埠
  - 這有助於減少攻擊面，降低未經授權存取或資料外洩的風險

- 使用非標準連接埠：
  - 可使服務較不易被預測和鎖定（例如，使用連接埠 8888 而非 80 作為網頁伺服器）
  - 僅提供模糊性的安全層，不應替代更健全的安全措施（如強認證、加密等）
  - 可能使故障排除和管理變得更複雜

## 傳輸方法

- **Transport Method（傳輸方法）**：指資料從一處移至另一處的方式，通常使用 TCP 或 UDP。

### TCP vs UDP

- **TCP（傳輸控制協定）**：面向連線的協定，確保資料無誤傳遞。
  - 在傳輸資料前建立連線
  - 使用確認、重傳丟失資料和排序來確保資料完整性
  - 適用於資料準確性重要的應用，如網頁或電子郵件傳輸
  - 如包含資料遺失，TCP 會自動重傳以確保完整呈現

- **UDP（使用者資料包協定）**：無連線協定，不保證資料傳遞。
  - 不建立連線即發送資料
  - 不提供錯誤檢查或復原服務
  - 比 TCP 更快速、高效，但可能導致資料包在傳輸中遺失
  - 適合視訊串流或遊戲等速度比完全準確性更重要的應用
  - 例如：影片串流中遺失一幀通常不會被注意到

## 選擇建議

- 使用提供加密功能的安全協定，特別是傳輸敏感資料或使用不受信任網路（如網際網路）時
  - 包括 HTTPS、SFTP、SSH、IMAPS、POP3S、SMTPS 和 SNMPS 等

- 依照應用需求選擇傳輸方法
  - 若資料完整性為優先考量，選擇 TCP
  - 若傳輸速度和效率為優先考量，選擇 UDP

- 遵循最小權限原則，只開放必要連接埠，阻擋所有不需要的連接埠
  - 有助於減少攻擊面和未授權存取風險
